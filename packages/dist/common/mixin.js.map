{"version":3,"sources":["../../src/src/common/mixin.js"],"names":["vendorize","what","prefixes","vendorsSel","map","v","join","fit","offset","offsetPx","position","top","right","bottom","left","fontSmoothing","smoothing","ellipsis","lines","lineHeight","unit","overflow","display","height","undefined","clearfix","content","clear","hairline","sticky","zIndex","createStyles","common","fn","Array","isArray","o","scope","defaultTransition","properties","duration","animation_duration","curve","animation_curve_default","prefixes_transition","fluidScale","property","minValue","maxValue","minBreakpoint","maxBreakpoint","orientation","fluidScales","sizes","sorted","sort","minBreakpoints","data","maxBreakpoints","shift","push","length","minValues","maxValues","index","fluidRule","isFirst","isLast","orientationUnit","orientationRule","rule","multiplier","adder","formula","p"],"mappings":"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","file":"mixin.js","sourcesContent":["// Mixins for j2c\n\nimport common from '../config/config';\nimport './object.assign';\n\n// Creates j2c vendor key string from vendor list\n// mixin.vendorize({'user-select': 'none'}, common.prefixes_user_select)\nconst vendorize = (what, prefixes) => {\n    const vendorsSel = prefixes.map((v) => ('_' + v + '$')).join('');\n    return {\n        [vendorsSel]: what\n    };\n};\n\n// Centers an item absolutely within relative parent\n// mixin.fit()\nconst fit = (offset = 0) => {\n    const offsetPx = offset + 'px';\n    return {\n        position: 'absolute',\n        top: offsetPx,\n        right: offsetPx,\n        bottom: offsetPx,\n        left: offsetPx\n    };\n};\n\n// Optional font smoothing\n// mixin.fontSmoothing()\nconst fontSmoothing = (smoothing = true) => {\n    if (smoothing) {\n        return {\n            '-webkit-font-smoothing': 'antialiased',\n            '-moz-osx-font-smoothing': 'grayscale'\n        };\n    } else {\n        return {\n            '-webkit-font-smoothing': 'subpixel-antialiased',\n            '-moz-osx-font-smoothing': 'auto'\n        };\n    }\n};\n\n// Breaks off a line with ...\n// unless lines is 'none'\n// mixin.ellipsis(1, 16) // max 1 line, 16px high\n// mixin.ellipsis(2, 1.3, 'em') // max 2 lines, 2.6em high\nconst ellipsis = (lines, lineHeight, unit = 'px') => {\n    if (lines === 'none') {\n        return {\n            'text-overflow': 'initial',\n            overflow: 'initial',\n            display: 'block',\n            height: 'auto'\n        };\n    }\n    return Object.assign(\n        {},\n        {\n            overflow: 'hidden',\n            'text-overflow': 'ellipsis',\n            'text-rendering': 'auto' // Samsung Android\n        },\n        (lines !== undefined) ? {\n            '-webkit-line-clamp': lines,\n            '-webkit-box-orient': 'vertical',\n            display: '-webkit-box'\n        } : null,\n        (lineHeight !== undefined) ? {\n            'max-height': (lines * lineHeight) + unit\n        } : null\n    );\n};\n\n// Clears float\n// mixin.clearfix()\nconst clearfix = () => ({\n    '&:after': {\n        content: '\"\"',\n        display: 'table',\n        clear: 'both'\n    }\n});\n\n\n// Creates a very thin line\n// disabled, does not work in Chrome\n// mixin.hairline()\nconst hairline = () => ({});\n\n// const hairline = (which) => ({\n//     [`${which}-width`]: '1px',\n//\n//     ' html.pe-hairlines &': {\n//         [`${which}-width`]: '0.5px'\n//     }\n// });\n\n// Test if browser handles 0.5px borders\n// and add class pe-hairlines if so\n// if (window.devicePixelRatio && devicePixelRatio >= 2) {\n//     const el = document.createElement('div');\n//     el.style.border = '.5px solid transparent';\n//     document.body.appendChild(el);\n//     if (el.offsetHeight === 1) {\n//         document.querySelector('html').classList.add('pe-hairlines');\n//     }\n//     document.body.removeChild(el);\n// }\n\n// Creates sticky headers in a scrollable list\n// Does not work in Chrome: http://caniuse.com/#feat=css-sticky\n// mixin.sticky()\nconst sticky = (zIndex = 1) => ([\n    {position: '-webkit-sticky'},\n    {position: '-moz-sticky'},\n    {position: '-o-sticky'},\n    {position: '-ms-sticky'},\n    {position: 'sticky'},\n    {\n        top: 0,\n        'z-index': zIndex\n    }\n]);\n\n// Polythene utility function to generate style objects with scopes\n// Used in theme files\nconst createStyles = (common, fn) => {\n    if (Array.isArray(common)) {\n        return common.map((o) => {\n            for (let scope in o) {\n                return {[scope]: fn(o[scope])};\n            };\n        });\n    } else {\n        return fn(common);\n    }\n};\n\n// Creats a transition with presets\n// mixin.defaultTransition('opacity', config.animation_duration)\nconst defaultTransition = (properties = 'all', duration = common.animation_duration, curve = common.animation_curve_default) => {\n    return [\n        vendorize({\n            'transition-delay': 0\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-duration': duration\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-timing-function': curve\n        }, common.prefixes_transition),\n        vendorize({\n            'transition-property': properties\n        }, common.prefixes_transition),\n    ];\n};\n\n// Scales an item dynamically between 2 screen sizes\n// mixin.fluidScale('font-size', 'px', 50, 100);\n// => 50px at 320 and below; scaling between sizes 50px and 100px in between the breakpoints; 100px at 1920 and above\nconst fluidScale = (property, unit, minValue, maxValue, minBreakpoint = 320, maxBreakpoint = 1920, orientation = 'horizontal') => (fluidScales([property], unit, [[minBreakpoint, minValue], [maxBreakpoint, maxValue]], orientation));\n\n// Scales an item dynamically between multiple screen sizes\n// mixin.fluidScales(['padding-left', 'padding-right'], 'px', [[375, 40], [320, 35], [480, 55]])\n// => 35px padding-left and padding-right at 320 and below; scaling between sizes 35px and 40px in between the breakpoints 320 and 375; scaling between sizes 40px and 55px in between the breakpoints 375 and 480; 55px at 480 and above\nconst fluidScales = (property, unit, sizes, orientation) => {\n    const sorted = sizes.sort();\n    const minBreakpoints = sorted.map((data) => (data[0]));\n    const maxBreakpoints = sorted.map((data) => (data[0]));\n    maxBreakpoints.shift();\n    maxBreakpoints.push(minBreakpoints[minBreakpoints.length - 1]);\n    const minValues = sorted.map((data) => (data[1]));\n    const maxValues = sorted.map((data) => (data[1]));\n    maxValues.shift();\n    maxValues.push(minValues[minValues.length - 1]);\n    return sorted.map((data, index) => (fluidRule(\n        property,\n        unit,\n        orientation,\n        minBreakpoints[index],\n        maxBreakpoints[index],\n        minValues[index],\n        maxValues[index],\n        index === 0,\n        index === sorted.length - 1\n    )));\n};\n\nconst fluidRule = (property, unit, orientation = 'horizontal', minBreakpoint, maxBreakpoint, minValue, maxValue, isFirst, isLast) => {\n    const orientationUnit = (orientation === 'vertical') ? 'vh' : 'vw';\n    const orientationRule = (orientation === 'vertical') ? 'height' : 'width';\n    const rule = isLast\n        ? [`@media (min-${orientationRule}: ${minBreakpoint}px)`]\n        : [`@media (min-${orientationRule}: ${minBreakpoint}px) and (max-${orientationRule}: ${maxBreakpoint}px)`];\n    const multiplier = `((${maxValue} - ${minValue}) / (${maxBreakpoint} - ${minBreakpoint}) * 100${orientationUnit})`;\n    const adder = `(((${minValue} * ${maxBreakpoint}) - (${maxValue} * ${minBreakpoint})) / (${maxBreakpoint} - ${minBreakpoint})) * 1${unit}`;\n    const formula = `calc(${multiplier} + ${adder})`;\n    const properties = Array.isArray(property) ? property : [property];\n    return [\n        isFirst ? properties.map((p) => ({[p]: `${minValue}${unit}`})) : null,\n        {[rule]: properties.map((p) => ({[p]: isLast ? `${maxValue}${unit}` : formula}))}\n    ];\n};\n\nexport default {\n    clearfix,\n    createStyles,\n    defaultTransition,\n    ellipsis,\n    fit,\n    fontSmoothing,\n    fluidScale,\n    fluidScales,\n    hairline,\n    sticky,\n    vendorize\n};\n"]}