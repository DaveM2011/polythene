{"version":3,"sources":["../../src/src/card/card.js"],"names":["CSS_CLASSES","block","overlay","overlaySheet","overlayContent","mediaDimmer","mediaCropX","mediaCropY","media","header","headerTitle","title","subtitle","text","primary","primaryMedia","actions","actionsHorizontal","actionsVertical","actionsJustified","actionsBordered","mediaRatioSquare","mediaRatioLandscape","primaryHasMedia","mediaSmall","mediaRegular","mediaMedium","mediaLarge","imageRatios","landscape","square","createOverlay","opts","tag","content","map","o","key","Object","keys","contentMap","class","sheet","join","createText","mediaTypeClasses","small","regular","medium","large","mediaClassForType","mode","createMedia","ratio","origin","initImage","el","inited","img","querySelector","onload","w","naturalWidth","h","naturalHeight","naturalRatio","cropClass","className","clientWidth","clientHeight","imageHeight","diff","offset","Math","ceil","style","marginTop","imageWidth","marginLeft","type","config","createHeader","icon","front","actionLayoutClasses","horizontal","vertical","justified","actionClassForLayout","layout","createActions","createPrimary","partOpts","lookup","pops","attrs","Array","isArray","part","createView","ctrl","url","props","id","events","unshift","z","animated","before","after","component","controller","undefined","prop","view"],"mappings":"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","file":"card.js","sourcesContent":["import '../common/object.assign';\nimport m from 'mithril';\nimport shadow from '../shadow/shadow';\nimport icon from '../icon/icon';\nimport listTile from '../list-tile/list-tile';\nimport './theme';\n\nconst CSS_CLASSES = {\n    block: 'pe-card',\n    overlay: 'pe-card__overlay',\n    overlaySheet: 'pe-card__overlay--sheet',\n    overlayContent: 'pe-card__overlay__content',\n    mediaDimmer: 'pe-card__media__dimmer',\n    mediaCropX: 'pe-card__media--crop-x',\n    mediaCropY: 'pe-card__media--crop-y',\n    media: 'pe-card__media',\n    header: 'pe-card__header',\n    headerTitle: 'pe-card__header-title',\n    title: 'pe-card__title',\n    subtitle: 'pe-card__subtitle',\n    text: 'pe-card__text',\n    primary: 'pe-card__primary',\n    primaryMedia: 'pe-card__primary__media',\n    actions: 'pe-card__actions',\n    actionsHorizontal: 'pe-card__actions--horizontal',\n    actionsVertical: 'pe-card__actions--vertical',\n    actionsJustified: 'pe-card__actions--justified',\n    actionsBordered: 'pe-card__actions--borders',\n    mediaRatioSquare: 'pe-card__media--square',\n    mediaRatioLandscape: 'pe-card__media--landscape',\n    primaryHasMedia: 'pe-card__primary--media',\n    mediaSmall: 'pe-card__media--small',\n    mediaRegular: 'pe-card__media--regular',\n    mediaMedium: 'pe-card__media--medium',\n    mediaLarge: 'pe-card__media--large'\n};\n\nconst imageRatios = {\n    landscape: 16 / 9,\n    square: 1\n};\n\nconst createOverlay = (opts = {}) => {\n    const tag = opts.tag || 'div';\n    const content = opts.content.map(function(o) {\n        const key = Object.keys(o)[0];\n        return contentMap[key](o);\n    });\n    return m('div', {\n        class: [\n            CSS_CLASSES.overlay,\n            opts.sheet ? CSS_CLASSES.overlaySheet : null,\n        ].join(' ')\n    }, [\n        m(tag, {\n            class: [CSS_CLASSES.overlayContent, opts.class].join(' ')\n        }, content),\n        m('div', {\n            class: CSS_CLASSES.mediaDimmer\n        })\n    ]);\n};\n\nconst createText = o => {\n    const opts = o.text || {};\n    const tag = opts.tag || 'div';\n    return m(tag, {\n        class: [CSS_CLASSES.text, opts.class].join(' ')\n    }, opts.content);\n};\n\n// media type to class\n\nconst mediaTypeClasses = {\n    small: CSS_CLASSES.mediaSmall,\n    regular: CSS_CLASSES.mediaRegular,\n    medium: CSS_CLASSES.mediaMedium,\n    large: CSS_CLASSES.mediaLarge\n};\n\nconst mediaClassForType = (mode = 'regular') => {\n    return mediaTypeClasses[mode];\n};\n\nconst createMedia = o => {\n    const opts = o.media || {};\n    const ratio = opts.ratio || 'landscape';\n    const origin = opts.origin || 'center';\n    const tag = opts.tag || 'div';\n\n    let initImage = function(el, inited) {\n        if (inited) {\n            return;\n        }\n        let img = el.querySelector('img');\n        if (img) {\n            img.onload = function() {\n                const w = this.naturalWidth;\n                const h = this.naturalHeight;\n                const naturalRatio = w / h;\n                // crop-x: crop over x axis\n                // crop-y: crop over y axis\n                const cropClass = (naturalRatio < imageRatios[ratio]) ? CSS_CLASSES.mediaCropX : CSS_CLASSES.mediaCropY;\n                img.className = cropClass;\n\n                if (origin !== 'start') {\n                    const clientWidth = el.clientWidth;\n                    const clientHeight = el.clientHeight;\n                    if (naturalRatio < imageRatios[ratio]) {\n                        // orient on y axis\n                        const imageHeight = clientWidth / naturalRatio;\n                        const diff = clientHeight - imageHeight;\n                        const offset = Math.ceil((origin === 'center') ? diff / 2 : diff);\n                        this.style.marginTop = offset + 'px';\n                    } else {\n                        // orient on x axis\n                        const imageWidth = clientHeight * naturalRatio;\n                        const diff = clientWidth - imageWidth;\n                        const offset = Math.ceil((origin === 'center') ? diff / 2 : diff);\n                        this.style.marginLeft = offset + 'px';\n                    }\n                }\n            };\n        }\n    };\n\n    return m(tag, {\n        class: [\n            CSS_CLASSES.media,\n            mediaClassForType(opts.type),\n            (ratio === 'landscape' ? CSS_CLASSES.mediaRatioLandscape : CSS_CLASSES.mediaRatioSquare),\n            opts.class\n        ].join(' '),\n        config: initImage\n    }, [\n        opts.content,\n        opts.overlay ? createOverlay(opts.overlay) : m('div', {class: CSS_CLASSES.mediaDimmer})\n    ]);\n};\n\nconst createHeader = o => {\n    const opts = o.header || {};\n    return m(listTile, Object.assign({}, opts, {\n        class: [CSS_CLASSES.header, opts.class].join(' ')\n    }, opts.icon ? {\n        front: m(icon, opts.icon),\n    } : null));\n};\n\nconst actionLayoutClasses = {\n    horizontal: CSS_CLASSES.actionsHorizontal,\n    vertical: CSS_CLASSES.actionsVertical,\n    justified: CSS_CLASSES.actionsJustified\n};\nconst actionClassForLayout = (layout = 'horizontal') => (actionLayoutClasses[layout]);\n\nconst createActions = o => {\n    const opts = o.actions || {};\n    const tag = opts.tag || 'div';\n    return m(tag, {\n        class: [CSS_CLASSES.actions, actionClassForLayout(opts.layout), opts.class].join(' ')\n    }, opts.content);\n};\n\nconst createPrimary = o => {\n    let content, key, partOpts;\n    const opts = o.primary || {};\n    const tag = opts.tag || 'div';\n    let primaryHasMedia = false;\n\n    const lookup = {\n        title: function(pops) {\n            return pops.attrs ? pops : m('div', {class: CSS_CLASSES.title}, [\n                pops.title ? pops.title : null,\n                pops.subtitle ? m('div', {class: CSS_CLASSES.subtitle}, pops.subtitle) : null\n            ]);\n        },\n        media: function(pops) {\n            primaryHasMedia = true;\n            return m('div', {\n                class: CSS_CLASSES.primaryMedia\n            }, createMedia({\n                media: pops\n            }));\n        },\n        actions: function(pops) {\n            return createActions({\n                actions: pops\n            });\n        }\n    };\n\n    if (Array.isArray(opts.content)) {\n        content = opts.content.map(function(part) {\n            key = Object.keys(part)[0];\n            partOpts = part[key];\n            if (lookup[key]) {\n                return lookup[key](partOpts);\n            } else {\n                return part;\n            }\n        });\n    } else {\n        // shorthand for simple primary titles\n        content = [\n            opts.title ? lookup.title({\n                title: opts.title,\n                subtitle: opts.subtitle\n            }) : null,\n            opts.media ? lookup.media(opts.media) : null,\n            opts.actions ? lookup.actions(opts.actions) : null,\n            opts.content ? opts.content : null\n        ];\n    }\n    return m(tag, {\n        class: [\n            CSS_CLASSES.primary,\n            (primaryHasMedia ? CSS_CLASSES.primaryHasMedia : null)\n        ].join(' ')\n    }, content);\n};\n\nconst contentMap = {\n    text: createText,\n    media: createMedia,\n    header: createHeader,\n    primary: createPrimary,\n    actions: createActions\n};\n\nconst createView = (ctrl, opts = {}) => {\n    const tag = opts.tag || opts.url ? 'a' : 'div';\n    const props = Object.assign({}, {\n        class: [CSS_CLASSES.block, opts.class].join(' '),\n        id: opts.id || '',\n        config: opts.config\n    }, (opts.url ? opts.url : null), (opts.events ? opts.events : null));\n\n    let content;\n    if (Array.isArray(opts.content)) {\n        content = opts.content.map(function(o) {\n            const key = Object.keys(o)[0];\n            return contentMap[key](o);\n        });\n        content.unshift(m(shadow, {\n            z: ctrl.z(),\n            animated: true\n        }));\n    } else {\n        content = [\n            m(shadow, {\n                z: ctrl.z(),\n                animated: true\n            }),\n            opts.content\n        ];\n    }\n    return m(tag, props, [opts.before, content, opts.after]);\n};\n\nconst component = {\n    controller: (opts = {}) => {\n        let z = (opts.z !== undefined) ? opts.z : 1;\n        return {\n            z: m.prop(z)\n        };\n    },\n    view: (ctrl, opts = {}) => {\n        return createView(ctrl, opts);\n    }\n};\n\nexport default component;\n"]}