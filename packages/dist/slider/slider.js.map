{"version":3,"sources":["../../src/src/slider/slider.js"],"names":["CSS_CLASSES","block","thumb","label","track","trackPart","trackPartValue","trackPartRest","trackBar","trackBarValue","control","ticks","tick","pin","isDisabled","isActive","hasTrack","hasPin","hasFocus","isAtMin","hasTicks","focusElement","eventMoveType","window","PointerEvent","DocumentTouch","document","eventEndType","deFocus","ctrl","blur","undefined","focus","el","positionFromEvent","e","isVertical","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","min","max","stepSize","steps","Math","round","items","s","push","class","readRangeData","controlWidth","thumb_size","trackEl","getBoundingClientRect","width","styles","getComputedStyle","rangeOffset","parseFloat","marginLeft","calculateClickOffset","controlOffset","clickOffset","initControlEvent","controlPos","eventPos","initTrackEvent","handlePosEvent","pos","redraw","startDrag","opts","isDragging","preventDefault","drag","endDrag","removeEventListener","addEventListener","startTrack","createSlider","interactiveTrack","stepCount","parseInt","step","onStartTrack","onInitDrag","flexValueCss","flexRestValue","flexRestCss","config","inited","setTimeout","disabled","onmousedown","ontouchstart","flex","webkitFlex","tabindex","onfocus","onblur","onkeydown","which","decrease","shiftKey","increase","events","icon","createView","tag","props","join","id","content","before","after","component","controller","defaultValue","v","getValue","multiply","view"],"mappings":"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","file":"slider.js","sourcesContent":["import '../common/object.assign';\nimport p from '../polythene/polythene';\nimport m from 'mithril';\nimport './theme';\nimport themeConfig from './theme/config';\n\nconst CSS_CLASSES = {\n    block: 'pe-slider',\n    thumb: 'pe-slider__thumb',\n    label: 'pe-slider__label',\n    track: 'pe-slider__track',\n    trackPart: 'pe-slider__track-part',\n    trackPartValue: 'pe-slider__track-value',\n    trackPartRest: 'pe-slider__track-rest',\n    trackBar: 'pe-slider__track-bar',\n    trackBarValue: 'pe-slider__track-bar-value',\n\n    control: 'pe-slider__control',\n    ticks: 'pe-slider__ticks',\n    tick: 'pe-slider__ticks-tick',\n    pin: 'pe-slider__pin',\n\n    isDisabled: 'pe-slider--disabled',\n    isActive: 'pe-slider--active',\n    hasTrack: 'pe-slider--track',\n    hasPin: 'pe-slider--pin',\n    hasFocus: 'pe-slider--focus',\n    isAtMin: 'pe-slider--min',\n    hasTicks: 'pe-slider--ticks'\n};\n\nlet focusElement;\n\n// const eventStartType = window.PointerEvent ? 'pointerdown' : (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchstart' : 'mousedown';\nconst eventMoveType = window.PointerEvent ? 'pointermove' : (('ontouchmove' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchmove' : 'mousemove';\nconst eventEndType = window.PointerEvent ? 'pointerup' : (('ontouchend' in window) || window.DocumentTouch && document instanceof DocumentTouch) ? 'touchend' : 'mouseup';\n\nconst deFocus = (ctrl) => {\n    if (focusElement) {\n        focusElement.blur();\n    }\n    focusElement = undefined;\n    ctrl.hasFocus = false;\n};\n\nconst focus = (ctrl, el) => {\n    deFocus(ctrl);\n    focusElement = el;\n    ctrl.hasFocus = true;\n};\n\nconst positionFromEvent = (e, isVertical) => {\n    if (p.isTouch) {\n        return isVertical ? e.touches[0].pageY : e.touches[0].pageX;\n    } else {\n        return isVertical ? e.pageY : e.pageX;\n    }\n};\n\nconst updatePinPosition = (ctrl) => {\n    if (ctrl.controlEl && ctrl.pinEl) {\n        const left = ctrl.fraction() * ctrl.rangeWidth;\n        ctrl.pinEl.style.left = left + 'px';\n    }\n};\n\nconst updateValue = (ctrl, value) => {\n    ctrl.setValue(value);\n    updatePinPosition(ctrl);\n};\n\nconst generateTickMarks = (min, max, stepSize) => {\n    const steps = Math.round((max - min) / stepSize);\n    const items = [];\n    let s = steps + 1;\n    while (s > 0) {\n        items.push(m('div', {class: CSS_CLASSES.tick}));\n        s--;\n    }\n    return items;\n};\n\nconst readRangeData = (ctrl) => {\n    if (ctrl.controlEl) {\n        // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n        ctrl.controlWidth = themeConfig.thumb_size;\n        ctrl.rangeWidth = ctrl.trackEl.getBoundingClientRect().width - ctrl.controlWidth;\n        const styles = window.getComputedStyle(ctrl.trackEl);\n        ctrl.rangeOffset = parseFloat(styles.marginLeft);\n    }\n};\n\nconst calculateClickOffset = (ctrl, controlOffset = 0) => {\n    ctrl.clickOffset = ctrl.trackEl.getBoundingClientRect().left - (ctrl.rangeOffset - ctrl.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (ctrl, e) => {\n    const controlPos = ctrl.controlEl.getBoundingClientRect().left;\n    const eventPos = positionFromEvent(e);\n    const controlOffset = eventPos - controlPos - ctrl.controlWidth / 2;\n    calculateClickOffset(ctrl, controlOffset);\n};\n\nconst initTrackEvent = (ctrl) => {\n    calculateClickOffset(ctrl, 0);\n};\n\nconst handlePosEvent = (ctrl, e) => {\n    const pos = positionFromEvent(e) - ctrl.clickOffset;\n    const value = ctrl.min + ((pos - ctrl.rangeOffset) / ctrl.rangeWidth) * (ctrl.max - ctrl.min);\n    updateValue(ctrl, value);\n    m.redraw();\n};\n\nconst startDrag = (ctrl, opts, e) => {\n    if (ctrl.isDragging) return;\n    e.preventDefault();\n    ctrl.isDragging = true;\n    ctrl.isActive = true;\n    deFocus(ctrl);\n\n    const drag = (e) => {\n        if (!ctrl.isDragging) return;\n        handlePosEvent(ctrl, e);\n    };\n\n    const endDrag = () => {\n        if (!ctrl.isDragging) return;\n        ctrl.isDragging = false;\n        ctrl.isActive = false;\n        deFocus(ctrl);\n        window.removeEventListener(eventMoveType, drag);\n        window.removeEventListener(eventEndType, endDrag);\n        m.redraw();\n    };\n\n    window.addEventListener(eventMoveType, drag);\n    window.addEventListener(eventEndType, endDrag);\n\n    readRangeData(ctrl);\n\n    if (opts.pin) {\n        updatePinPosition(ctrl);\n    }\n};\n\nconst startTrack = (ctrl, opts, e) => {\n    e.preventDefault();\n    if (ctrl.isDragging) return;\n    readRangeData(ctrl);\n    initTrackEvent(ctrl);\n    handlePosEvent(ctrl, e);\n    startDrag(ctrl, opts, e);\n};\n\nconst createSlider = (ctrl, opts = {}, hasTicks, interactiveTrack) => {\n    const fraction = ctrl.fraction();\n    const stepCount = Math.max(10, parseInt(opts.step, 10) || 1); // not more than 100 steps on the screen\n\n    const onStartTrack = (e) => {\n        startTrack(ctrl, opts, e);\n    };\n\n    const onInitDrag = (e) => {\n        readRangeData(ctrl);\n        initControlEvent(ctrl, e);\n        startDrag(ctrl, opts, e);\n    };\n\n    const flexValueCss = fraction + ' 1 0%';\n    const flexRestValue = (1 - fraction);\n    const flexRestCss = flexRestValue + ' 1 0%';\n\n    return [\n        m('div', Object.assign({}, {\n            class: CSS_CLASSES.track,\n            config: (el, inited) => {\n                if (inited) return;\n                ctrl.trackEl = el;\n                if (opts.pin) {\n                    setTimeout(() => {\n                        updatePinPosition(ctrl);\n                    }, 0);\n                }\n            }\n        }, (interactiveTrack && !opts.disabled && !p.isTouch) ? {\n            onmousedown: onStartTrack\n        } : null, (interactiveTrack && !opts.disabled && p.isTouch) ? {\n            ontouchstart: onStartTrack\n        } : null), [\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartValue,\n                    style: {\n                        flex: flexValueCss,\n                        '-ms-flex': flexValueCss,\n                        webkitFlex: flexValueCss\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            m('div', Object.assign({},\n                {\n                    class: CSS_CLASSES.control,\n                    config: (el, inited) => {\n                        if (inited) return;\n                        ctrl.controlEl = el;\n                    }\n                }, opts.disabled ? {\n                    disabled: true\n                } : {\n                    tabindex: opts.tabindex || 0,\n                    onfocus: () => {\n                        focus(ctrl, ctrl.controlEl);\n                    },\n                    onblur: () => {\n                        deFocus(ctrl);\n                    },\n                    onkeydown: (e) => {\n                        if (e.which === 27) {\n                            // ESCAPE\n                            ctrl.controlEl.blur(e);\n                        } else if (e.which === 37) {\n                            // LEFT\n                            ctrl.decrease(e.shiftKey);\n                        } else if (e.which === 38) {\n                            // UP\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 39) {\n                            // RIGHT\n                            ctrl.increase(e.shiftKey);\n                        } else if (e.which === 40) {\n                            // DOWN\n                            ctrl.decrease(e.shiftKey);\n                        }\n                        readRangeData(ctrl);\n                        updatePinPosition(ctrl);\n                    }\n                },\n                (!opts.disabled && !p.isTouch) ? {\n                    onmousedown: onInitDrag\n                } : null,\n                (!opts.disabled && p.isTouch) ? {\n                    ontouchstart: onInitDrag\n                } : null,\n                opts.events ? opts.events : null,\n                hasTicks ? {\n                    step: stepCount\n                } : null\n            ), opts.icon ? m('div', {class: CSS_CLASSES.thumb}, opts.icon) : null),\n            m('div',\n                {\n                    class: CSS_CLASSES.trackPart + ' ' + CSS_CLASSES.trackPartRest,\n                    style: {\n                        flex: flexRestCss,\n                        '-ms-flex': flexRestCss,\n                        webkitFlex: flexRestCss,\n                        'max-width': (flexRestValue * 100) + '%' // for IE Edge\n                    }\n                },\n                m('div', {class: CSS_CLASSES.trackBar},\n                    m('div', {class: CSS_CLASSES.trackBarValue})\n                )\n            ),\n            (hasTicks && !opts.disabled) ? m('div', {class: CSS_CLASSES.ticks}, generateTickMarks(ctrl.min, ctrl.max, stepCount)) : null,\n            (hasTicks && opts.pin && !opts.disabled) ? m('div', {\n                class: CSS_CLASSES.pin,\n                value: Math.round(ctrl.value()),\n                config: (el, inited) => {\n                    if (inited) return;\n                    ctrl.pinEl = el;\n                }\n            }) : null\n        ])\n    ];\n};\n\nconst createView = (ctrl, opts = {}) => {\n    if (typeof opts.value === 'function') {\n        ctrl.setValue(opts.value());\n    }\n    const tag = opts.tag || 'div';\n    const hasTicks = opts.ticks !== undefined && opts.ticks !== false;\n    const interactiveTrack = (opts.interactiveTrack !== undefined) ? opts.interactiveTrack : true;\n    const props = {\n        class: [\n            CSS_CLASSES.block,\n            (opts.disabled ? CSS_CLASSES.isDisabled : null),\n            (opts.pin ? CSS_CLASSES.hasPin : null),\n            (interactiveTrack ? CSS_CLASSES.hasTrack : null),\n            (ctrl.isActive ? CSS_CLASSES.isActive : null),\n            (ctrl.hasFocus ? CSS_CLASSES.hasFocus : null),\n            (ctrl.fraction() === 0 ? CSS_CLASSES.isAtMin : null),\n            (hasTicks ? CSS_CLASSES.hasTicks : null),\n            opts.class\n        ].join(' '),\n        id: opts.id || '',\n        config: opts.config\n    };\n    const content = createSlider(ctrl, opts, hasTicks, interactiveTrack);\n    return m(tag, props, [opts.before, content, opts.after]);\n};\n\nconst component = {\n    controller: (opts = {}) => {\n        const min = (opts.min !== undefined) ? opts.min : 0;\n        const max = (opts.max !== undefined) ? opts.max : 100;\n        const step = (opts.step !== undefined) ? opts.step : 1;\n        const defaultValue = 0;\n        let fraction = min;\n        let value = defaultValue;\n\n        if (typeof opts.value === 'function') {\n            const v = opts.value();\n            value = (v !== undefined) ? v : defaultValue;\n        } else {\n            value = (opts.value !== undefined) ? opts.value : defaultValue;\n        }\n\n        const setValue = (v) => {\n            if (v < min) v = min;\n            if (v > max) v = max;\n            value = step ? (Math.round(v / step) * step) : v;\n            fraction = (value - min) / (max - min);\n            if (opts.getValue) {\n                opts.getValue(value);\n            }\n        };\n\n        setValue(value);\n\n        return {\n            min,\n            max,\n            trackEl: null,\n            controlEl: null,\n            pinEl: null,\n            setValue,\n            value: () => (value),\n            fraction: () => (fraction),\n            increase: (multiply) => (setValue(value + (multiply ? 10 : 1) * (step || 1))),\n            decrease: (multiply) => (setValue(value - (multiply ? 10 : 1) * (step || 1))),\n            isActive: false,\n            hasFocus: false,\n            isDragging: false,\n            // coordinates\n            controlWidth: 0,\n            rangeWidth: 0,\n            rangeOffset: 0,\n            clickOffset: 0\n        };\n    },\n    view: (ctrl, opts = {}) => {\n        return createView(ctrl, opts);\n    }\n};\n\nexport default component;\n"]}